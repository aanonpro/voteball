<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <title>Soccer voter</title>
</head>

<body>
    <div class="container py-4 me-0">
        <div class="row">
            <label id="successmessage" class="text-success"></label>
            <form id="cform">
            <div class="col-12 col-md-6 col-sm-6 ">
                <h2 class="text-center text-success" style="text-transform: uppercase;">please vote for available
                    match
                </h2>
                <!-- <form class="was-validated"> -->
                <div class="row align-items-center mt-5">
                    <label class="form-label required" style="font-weight: bold;">Select Sport <span
                            class="text-danger">*</span></label>
                    <select class="form-select" name="typeSport" id="typeSport" form="sportForm">
                        <option value="" disabled selected>----""----</option>
                        <option value="Football">Football</option>
                        <option value="Volleyball">Volleyball</option>
                    </select>
                </div>
                <div class="row align-items-center mt-4">
                    <label class="form-label" style="font-weight: bold;">Select Team <span
                            class="text-danger">*</span></label>
                    <select class="form-select required" name="choseTeam" id="choseTeam" form="teamForm">
                        <option value="" disabled selected>----""----</option>
                        <option value="DMC">DMC</option>
                        <option value="DBA">DBA</option>
                        <option value="Emmzrem">Emmzrem(IB)</option>
                        <option value="T24">T24</option>
                        <option value="ខ្យង">ខ្យង</option>
                    </select>
                </div>
                <div class=" mt-4">
                    <label class="form-label" style="font-weight: bold;">Choose Date <span
                            class="text-danger">*</span></label><br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" name="datePlay" type="checkbox" id="monday" value="Monday">
                        <label class="form-check-label" for="monday">Monday</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" name="datePlay" type="checkbox" id="tuesday" value="Tuesday">
                        <label class="form-check-label" for="tuesday">Tuesday</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" name="datePlay" type="checkbox" id="wednesday"
                            value="Wednesday">
                        <label class="form-check-label" for="wednesday">Wednesday</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" name="datePlay" type="checkbox" id="thursday" value="Thursday">
                        <label class="form-check-label" for="thursday">Thursday</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" name="datePlay" type="checkbox" id="friday" value="Friday">
                        <label class="form-check-label" for="friday">Friday</label>
                    </div>
                    <div class="form-check form-check-inline">

                        <input class="form-check-input" name="datePlay" type="checkbox" id="saturday" value="Saturday">
                        <label class="form-check-label" for="saturday">Saturday</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" name="datePlay" type="checkbox" id="sunday" value="Sunday">
                        <label class="form-check-label" for="sunday">Sunday</label>
                    </div>
                </div>
                <div class="row align-items-center mt-4">
                    <label class="form-label" style="font-weight: bold;">Select Stadium <span
                            class="text-danger">*</span></label>
                    <select class="form-select required" name="choseStadium" id="choseStadium" form="stadiumForm">
                        <option value="" disabled selected>----""----</option>
                        <option value="ជ្រោយចង្វារ">ជ្រោយចង្វារ(សាលារៀន)</option>
                        <option value="Khemara">Khemara sport</option>
                        <option value="Platinum">Platinum sport club</option>
                        <option value="Eden">Eden</option>
                    </select>
                </div>
                <!-- </form> -->
                <hr>
                <div class="row align-items-center mt-4">
                    <button type="submit" id="btnSubmit" class="btn btn-success" onclick="add()">Submit</button>
                    <a class="btn btn-outline-danger mt-3" href="index.html" role="button">Clear</a>
                </div>

            </div>
            </form>
        </div>
    </div>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script>

        function add() {

            var select = document.getElementById('typeSport');
            var typesport = select.options[select.selectedIndex].text;

            // let typesport = document.forms["sportForm"]["typeSport"].value;
            if (typesport == "") {
                alert("Name and typesport must be filled out");
                return false;
            }

            var select = document.getElementById('choseTeam');
            var choseteam = select.options[select.selectedIndex].text;

            // let choseteam = document.forms["teamForm"]["choseTeam"].value;
            if (!choseteam) {
                // alert("Name and choseteam must be filled out");
                return false;
            }


            var ch_date = "";
            $.each($("input[name='datePlay']:checked"), function () {
                ch_date += ", " + $(this).val();
            });
            if (ch_date) {
                ch_date = ch_date.substring(1);

            } else {
                // alert('Please choose any date ');
                return false;
            }


            var select = document.getElementById('choseStadium');
            var chosestadium = select.options[select.selectedIndex].text;

            // let chosestadium = document.forms["stadiumForm"]["choseStadium"].value;
            if (!chosestadium) {
                // alert("Name and chosestadium must be filled out");
                return false;
            }
            // telegramAlert(typesport, choseteam, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday, chosestadium);
            telegramAlert(typesport, choseteam, ch_date, chosestadium);
        }

        const token = '5911609169:AAE0Rfgky5fapvK5IMcpKTarFKrWnUOyjyI';
        const chatId = '5016218982';

        function telegramAlert(typesport, choseteam, ch_date, chosestadium) {
            var title = "Soccer voter";
            var list = `<b>\n **** ${title} **** </b> <b>\n- ប្រភេទកីឡា : </b>${typesport} <b>\n- ប៉ះក្រុម : </b>${choseteam} <b>\n- ថ្ងៃ : </b>${ch_date} <b>\n- ទីលាន : </b>${chosestadium}\n`;
            $.ajax({
                type: 'POST',
                url: `https://api.telegram.org/bot${token}/sendMessage`,
                data: {
                    chat_id: chatId,
                    text: list,
                    parse_mode: 'html',
                },
                success: function(data) {
                    successmessage = 'Your voted was succesfully ';
                     $("#successmessage").text(successmessage);
                    $("#cform")[0].reset();
                },
                error: function(data) {             
                    successmessage = 'Error';
                    $("#successmessage").text(successmessage);
                },
            });
        }
    </script>
</body>

</html>
